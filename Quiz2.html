<!DOCTYPE HTML>
<html>
    <head>
        <title>About Me</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script type="text/javascript">

          var correct = 0;
          
          function checkAns(){
      
            var length = parseInt(localStorage.getItem("responselength"));
      
            for(i=0;i<length;i++){
      
              var correctanswer = "answer" + i;
              var answer = localStorage.getItem(correctanswer);
              var qid = "ans"+i;
              var givenanswer = document.getElementById(qid).value;
      
              if(givenanswer==answer){
                correct++;
                
                correct = correct.toString();
                localStorage.setItem("correct",correct);
                // localStorage.setItem("attemptquestion1", givenanswer);
              }
      
            }
      
            document.getElementById("aftersubmit").style.visibility = "visible";
            
            
      
            
      
          }
      
      
              
      
          function loadDoc() {
      
            var str = "";
            var xhr = new XMLHttpRequest();
            xhr.open('GET', "test.json", true);
            xhr.responseType = 'json';
            xhr.onload = function() {
              var status = xhr.status;
              if (status === 200) {
      
                var responselength = xhr.response.length;
                responselength = responselength.toString();
                localStorage.setItem("responselength",responselength);
          
                
                for(i=0;i<xhr.response.length;i++){
      
                  answer = xhr.response[i]["answer"];
      
                  localStorage.setItem("answer"+i,answer);
      
                  str += "<div id='q" + i + "'><p id='id" + i + "'>" + xhr.response[i][i+1] + "</p>" + 
                      "<input type='radio' name='ans" + i + "' id='ans" + i + "' value='" + xhr.response[i]["a"] + "'>" +"<label>" + xhr.response[i]["a"] + "</label><br>" + 
                      "<input type='radio' name='ans" + i + "' id='ans" + i + "' value='" + xhr.response[i]["b"] + "'>" +"<label>" + xhr.response[i]["b"] + "</label><br>" + 
                      "<input type='radio' name='ans" + i + "' id='ans" + i + "' value='" + xhr.response[i]["c"] + "'>" +"<label>" + xhr.response[i]["c"] + "</label><br>" + 
                      "<input type='radio' name='ans" + i + "' id='ans" + i + "' value='" + xhr.response[i]["d"] + "'>" +"<label>" + xhr.response[i]["d"] + "</label><br>" + 
                      "</div><br><br>";
      
                  
                }
      
                str +=  "<input type='submit' value='submit'>";
      
                document.getElementById("data1").innerHTML = str;
      
                document.getElementById("btn").style.visibility = "hidden";
                // for(i=1;i<xhr.response.length;i++){
      
      
                // }
      
              } else {
                console.log("Error in response")
              }
            };
            xhr.send();
      
          }
        </script>
        <link rel="stylesheet" href="styles.css"> 
    </head>
    <body>

        <div class="container-fluid" style="background-color: cornflowerblue;">
          <div class="row justify-content-between align-items-center">
            <div class="col-sm-6">
              <h1 class="indent">QUIZ</h1>
            </div>
            <!-- <div class="col-sm-6">
                <h1 class="indent">Question - 1</h1>
            </div> -->
          </div>
        </div>

        <!-- <div class="card mb-3">
          <img src="quiz header.png" class="card-img-top" alt="Quiz Image" width="2%" height="250px">
          <div class="card-body text-center" style="background-color: #10c495;">
              <h1 class="card-title">Question - 1</h1>
          </div>
        </div> -->

        <br>
        <br>

        <div class="container">
          <div class="card">
            <div class="card-body">
              <p class="card-text">
                <form id="data1" action="result.html" onsubmit="checkAns()">
                  <!-- <label for="validationDefault01">Roll No.</label>
                  <input type="text" class="form-control" id="rollno" required>
                  <br>
                  <label for="validationDefault03">Course</label>
                  <input type="text" class="form-control" id="course" required>
                  <br> -->

                </form>
                <button id="btn" onclick="loadDoc()">Click Me!!!</button>
              </p>
            </div>
          </div>
        </div>

    </body>
</html>